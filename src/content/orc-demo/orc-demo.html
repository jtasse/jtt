<!-- ORC Demo Info Pane - This HTML is inserted directly into the DOM -->
<div id="orc-info-pane">
	<h2 class="orc-pane-title">Orbital Refuse Collector Demo</h2>

	<div class="orc-pane-content">
		<!-- Reset Button -->
		<div style="margin-bottom: 15px">
			<button
				id="orc-reset-button"
				class="action-list-item"
				onclick="window.location.reload()"
			>
				Reset Scene
			</button>
		</div>

		<!-- Available Satellites List -->
		<div id="available-satellites-pane">
			<h3>Available Satellites</h3>
			<p id="satellite-help-text">Select a satellite</p>
			<ul id="satellite-list">
				<!-- Populated by JavaScript -->
			</ul>
		</div>

		<!-- Actions List -->
		<div id="actions-pane">
			<h3>Actions</h3>
			<button id="decommission-action" class="action-list-item disabled">
				Decommission Satellite
			</button>
		</div>

		<!-- Satellite Info Section -->
		<div id="satellite-info-pane">
			<h3>Satellite Info</h3>
			<p id="no-satellite-selected">No satellite selected</p>
			<div id="satellite-info-content" style="display: none">
				<div class="satellite-info-row">
					<span class="info-label">ID</span>
					<span id="selected-satellite-display-id" class="info-value">N/A</span>
				</div>
				<div class="satellite-info-row">
					<span class="info-label">Orbit Type</span>
					<span id="selected-satellite-orbit-type" class="info-value">N/A</span>
				</div>
				<div class="satellite-info-row">
					<span class="info-label">Status</span>
					<span
						id="selected-satellite-status"
						class="info-value status-operational"
						>Operational</span
					>
				</div>
			</div>
		</div>

		<!-- Documentation Section -->
		<div class="orc-pane-section">
			<h3>Documentation</h3>
			<a
				id="user-guide-link"
				href="../portfolio/docs/orc/user-guide.html"
				class="docs-link"
			>
				User Guide
			</a>
			<a
				href="https://jtj-inc.github.io/docusaurus-openapi-docs/"
				target="_blank"
				class="docs-link"
			>
				API Reference
			</a>
		</div>
	</div>
</div>

<!-- User Guide Overlay -->
<div id="user-guide-overlay" class="user-guide-overlay">
	<button
		id="user-guide-close"
		class="user-guide-close"
		aria-label="Close user guide"
	>
		&times;
	</button>
	<div id="user-guide-content" class="user-guide-content">
		<!-- User guide content loaded here -->
	</div>
</div>

<script>
	;(function () {
		const userGuideLink = document.getElementById("user-guide-link")
		const overlay = document.getElementById("user-guide-overlay")
		const closeBtn = document.getElementById("user-guide-close")
		const contentContainer = document.getElementById("user-guide-content")

		if (!userGuideLink || !overlay || !closeBtn || !contentContainer) return

		// Load and show user guide
		userGuideLink.addEventListener("click", async (e) => {
			e.preventDefault()
			e.stopPropagation()

			try {
				const response = await fetch(
					"/src/content/portfolio/docs/orc/user-guide.html"
				)
				const html = await response.text()

				// Parse the HTML and extract just the main content
				const parser = new DOMParser()
				const doc = parser.parseFromString(html, "text/html")
				const mainContent = doc.querySelector(".main-content")

				if (mainContent) {
					contentContainer.innerHTML = mainContent.innerHTML
				} else {
					// Fallback: use the body content
					contentContainer.innerHTML = doc.body.innerHTML
				}

				overlay.classList.add("visible")
			} catch (err) {
				console.error("Failed to load user guide:", err)
			}
		})

		// Close user guide
		closeBtn.addEventListener("click", () => {
			overlay.classList.remove("visible")
		})

		// Close on escape key
		document.addEventListener("keydown", (e) => {
			if (e.key === "Escape" && overlay.classList.contains("visible")) {
				overlay.classList.remove("visible")
			}
		})

		// Close when clicking outside content
		overlay.addEventListener("click", (e) => {
			if (e.target === overlay) {
				overlay.classList.remove("visible")
			}
		})
	})()
</script>
