<div class="content-page portfolio-page">
	<a class="temp-portfolio-link" href="../portfolio/orc-demo">ORC Demo</a>
	<a class="temp-portfolio-link" href="/portfolio/docs/orc">ORC Docs</a>

	<div class="portfolio-grid">
		<div
			class="portfolio-item"
			data-link="https://docs.google.com/document/d/1_Qa2S895RjTyAfpDfiXPbe9kCe7aDrc9P-8HHN1j3HQ/edit?usp=sharing"
		>
			<img
				class="portfolio-thumb"
				src="/images/portfolio/resume.svg"
				alt="Resume"
			/>
			<h2>My Resume</h2>
			<p>This is a read-only link to my primary resume.</p>
		</div>

		<div
			class="portfolio-item"
			data-link="https://jamestasse.tech/wp-content/uploads/2025/12/visual_resume_v6.4-james-tasse.drawio.png"
		>
			<img
				class="portfolio-thumb"
				src="/images/portfolio/visual-resume.svg"
				alt="Visual Resume"
			/>
			<h2>My Visual Resume</h2>
			<p>
				This infographic shows my 7 years of experience in technical writing and
				14 years experience in technical roles (including 8 years in software
				development).
			</p>
		</div>

		<div
			class="portfolio-item"
			data-link="https://www.youtube.com/watch?v=yu0_Xme9lEI"
		>
			<img
				class="portfolio-thumb"
				src="/images/portfolio/ronin.svg"
				alt="Ronin"
			/>
			<h2>Ronin: A Docs as Tests Story</h2>
			<p>
				Explains how Docs as Tests can be used to keep docs in sync with the
				product.
			</p>
		</div>
	</div>
</div>

<script>
	/* Portfolio item interaction: treat each .portfolio-item as a link.
	   On click:
	   - if link is YouTube, embed player into #content
	   - if link is Google Docs, embed document viewer
	   - otherwise open link in new tab
	*/
	;(function () {
		function extractYouTubeID(url) {
			try {
				const u = new URL(url)
				if (u.hostname.includes("youtube.com")) return u.searchParams.get("v")
				if (u.hostname === "youtu.be") return u.pathname.slice(1)
			} catch (e) {
				return null
			}
			return null
		}

		function extractGoogleDocsID(url) {
			try {
				const u = new URL(url)
				if (u.hostname.includes("docs.google.com")) {
					const match = u.pathname.match(/\/document\/d\/([^\/]+)/)
					return match ? match[1] : null
				}
			} catch (e) {
				return null
			}
			return null
		}

		function createEmbedViewer(embedUrl, title) {
			const content = document.getElementById("content")
			if (!content) return null

			content.innerHTML = ""
			const iframe = document.createElement("iframe")
			iframe.src = embedUrl
			iframe.width = "100%"
			iframe.height = "600"
			iframe.style.border = "1px solid #00ffff"
			iframe.style.borderRadius = "8px"
			iframe.allow =
				"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
			iframe.allowFullscreen = true

			const wrapper = document.createElement("div")
			wrapper.className = "embed-wrapper"
			wrapper.style.width = "100%"
			wrapper.style.maxHeight = "80vh"
			wrapper.style.overflow = "auto"
			wrapper.appendChild(iframe)

			content.appendChild(wrapper)
			content.style.display = "block"
			content.style.pointerEvents = "auto"

			return wrapper
		}

		document.querySelectorAll(".portfolio-item").forEach((item) => {
			item.style.cursor = "pointer"
			item.addEventListener("click", (ev) => {
				ev.preventDefault()
				ev.stopPropagation()
				const link = item.dataset.link
				if (!link) return

				// Hide 3D planes
				if (window.hideAllPlanes) window.hideAllPlanes()

				const content = document.getElementById("content")
				// Clear any pinned bottom/maxHeight so embedded content can be visible
				if (content) {
					content.style.bottom = ""
					content.style.maxHeight = ""
				}

				// Check for YouTube
				const ytId = extractYouTubeID(link)
				if (ytId) {
					console.debug("[portfolio] embedding YouTube:", ytId)
					const embedUrl = `https://www.youtube.com/embed/${ytId}?autoplay=1&rel=0`
					createEmbedViewer(embedUrl, "YouTube Video")
					// Ensure layout updaters run
					if (window.updateContentFloorPosition)
						window.updateContentFloorPosition()
					if (window.updateContentMaxHeightToSeparator)
						window.updateContentMaxHeightToSeparator()
					return
				}

				// Check for Google Docs
				const docId = extractGoogleDocsID(link)
				if (docId) {
					console.debug("[portfolio] embedding Google Doc:", docId)
					const embedUrl = `https://docs.google.com/document/d/${docId}/preview`
					createEmbedViewer(embedUrl, "Google Document")
					// Ensure layout updaters run
					if (window.updateContentFloorPosition)
						window.updateContentFloorPosition()
					if (window.updateContentMaxHeightToSeparator)
						window.updateContentMaxHeightToSeparator()
					return
				}

				// For other links, open in new tab
				console.debug("[portfolio] opening external link:", link)
				window.open(link, "_blank")
			})
		})
	})()
</script>
